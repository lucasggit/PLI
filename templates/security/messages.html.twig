{% extends 'base.html.twig' %}

{% block title %}My-Ecoach{% endblock %}

{% block body %}
<style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
</style>
<div class="col-md-5 p-lg-5 mx-auto my-5">
    <h1 class="display-4 font-weight-normal">Messages priv√©s</h1>
    <p class="lead font-weight-normal">La liste de tes messages WOW ! </p>
</div>

{% block javascripts %}
    <script>
        let ul = null;
        const es = new EventSource('http://localhost:8000/hub?topic=1e9');
        es.onmessage = e => {
            const data = JSON.parse(e.data);

            if (!ul) {
                ul = document.createElement('ul');

                const messages = document.getElementById('main--container');
                messages.innerHTML = '';
                messages.append(ul);
            }

            const li = document.createElement('li');
            li.append(document.createTextNode(data.headline));
            ul.append(li);
        }
    </script>{% endblock %}

{% endblock %}
